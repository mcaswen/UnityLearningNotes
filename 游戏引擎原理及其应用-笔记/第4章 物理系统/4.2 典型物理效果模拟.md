#### 子弹效果实现
- **用户交互**
	- 子弹实时生成
	- 确定鼠标点击方向为子弹发射方向
	- 鼠标按住有蓄力功能
- **确定子弹发射方向**
	- 以摄像机位置为起点，向着鼠标（在屏幕空间上）点击的位置来发射射线，射线的方向即为子弹方向
- **四元数 `Quaternion`**
	- 欧拉角常用于表示物体旋转
	- 但这种表示方法的最大问题是可能引发万向节死锁(`Gimbal Lock`)
	- **万向节死锁(`Gimbal Lock`)**
		- 当追踪物体时，其**上下移动**，可以围绕**x轴**旋转来跟踪
		- 其**左右**移动，可以围绕**y轴**旋转来跟踪
		- 但当物体来到镜头**正上方**时，物体突然**转向**，此时镜头已经围绕**x轴**旋转了90度。处于竖直状态，**和y轴平行**。
			- 按照规则，物体这时左右转向，镜头应该绕**y轴**旋转
			- 但此时物体已经朝向**y轴正方向**，旋转镜头只能产生镜头画面**绕屏幕原点旋转**的效果，无法继续追踪物体
			- 这就是万向节死锁
	- 使用四元数旋转的一个最大好处是可以实现`SLERP`插值（**Spherical Linear Interpolation，球面线性插值**）
	- 这可以解决使用欧拉角表示旋转时带来的万向节死锁问题
- **`SLERP`插值的原理**
	- 首先回顾一下普通线性插值的计算方法
		1. 计算两个值的差 `a差 = a1 - a0`
		2. 取得插值的一部分 t * a差
		3. 在初始值中加上2中的结果： `Lerp(a0, a1, t) = a0 + t * a差`
	 - 四元数中的插值也类似：
		 1. 计算两个四元数的差：`q差 = q0^(-1) * q1`
		 2. 计算差的一部分：`q差^t`
		 3. 在初始值中加上2的结果  `q0 * q差^t`
		 4. 使用四元数方式表示的两个旋转角度的球面线性插值结果为：`slerp(q0, q1, t) = q0(q0^(-1) * q1)^t`
- **四元数在游戏中的应用**
	- 用来代替欧拉角参与旋转计算
	- 一般游戏引擎支持四元数以及四元数运算
	- 和欧拉角之间可以相互转换
	- 欧拉角仍表示游戏对象的旋转，计算过程由四元数完成，之后还需转换回欧拉角表示

#### Unity中的四元数旋转应用

```
Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition)
```
**解析**：
- `Ray`为射线类型
- `ScreenPointToRay()`为`Camera.main`中包含的一个方法，用于从摄像机位置向指定屏幕空间位置发射一条射线
- 在此处的`Input.mousePosition`参数即表示向屏幕空间中的鼠标点击位置发射

```
Gameobject b = Instantiate(bullet, ray.origin, Quaternion.LookAtRotation(ray.direction));
```
**解析**：
- `bullet`为事先传入的预制体
- `ray.origin`为之前计算出的射线的起点坐标（世界空间）
- `ray.direction`是射线的方向向量
- `Quaternion.LookRotation(ray.direction))`表示四元数旋转，这个旋转使得物体的z轴（即“向前”方向）指向`ray.direction`方向