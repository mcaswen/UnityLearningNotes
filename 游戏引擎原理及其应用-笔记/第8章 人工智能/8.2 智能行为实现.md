#### 巡逻的原理
- 构造由一系列关键点组成的巡逻路径
- 使用自动寻路方式，让敌人移向目标点
- 到达目标点后，将目标点设置为下一个关键点

#### 让敌人判断是否“看到”玩家
- 敌人面前绑定一个Trigger
	- 只有进入这个区域的玩家才可能被看到
- 使用视野来判断玩家是否在敌人的一定视角范围
	- 利用数学方法判断玩家和敌人视线的偏离

**代码示例**：
```
public class PlayerDetector : MonoBehaviour
{
	public float fieldOfViewAngle;
	public Vector3 playerLastPos;
	private bool _isPlayerInSight;
	
	private Collider col;
	
	void Start()
	{
		col = GetComponent<Collider>();
	}
	
	void OntriggerStay(Collider other)
	{
		_isPlayerInSight = false
		if (other.gameObject.tag == "Player")
		{
			Vector3 dir = other.transform.position - 
							transform.position
			float angle = Vector.Angle(dir,
							 transform.forward)
			if (angle <= fieldOfViewAngle * 0.5)
			{
				RayCastHit hit;
				RayCast(transform.position, dir.normalized,
						 out hit, col.size.z)
				if (hit.collider.gameObject.tag == "Player")
				{
					_isPlayerInSight = true
					playerLastPos = other.position;
				}
			}							 
		}
	}
	
	void OntriggerExit(Collider other)
	{
		if (other.gameObject.tag == "Player")
		{
			_isPlayerInSight = false;
		}
	}
}
```

#### 攻击状态
- 当敌人和玩家距离达到攻击状态时触发
- 可以使用子状态
	- 选择不同攻击方式
	- 根据玩家反应决定自己行为
		- 躲避，退后等

#### 追踪玩家
- 当玩家出现在视野中时触发这个状态
- 将玩家位置设置为目标位置
	- 为了真实性，玩家逃出视野范围时的位置也记录
	- 在特定时间内无法找到玩家，就停止追踪